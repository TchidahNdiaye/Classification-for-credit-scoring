****************************************************************;
******        HP TREE (PROC HPSPLIT) SCORING CODE        ******;
****************************************************************;
 
******              LABELS FOR NEW VARIABLES              ******;
LABEL _Node_ = 'Node number';
LABEL _Leaf_ = 'Leaf number';
LABEL _WARN_ = 'Warnings';
LABEL P_BAD0 = 'Predicted: BAD=0';
LABEL P_BAD1 = 'Predicted: BAD=1';
LABEL V_BAD0 = 'Validated: BAD=0';
LABEL V_BAD1 = 'Validated: BAD=1';
 
 _WARN_ = ' ';
 
******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
LENGTH _RT_5_6 $6;
_RT_5_6 = ' ';
DROP _RT_5_6;
_RT_5_6 = LEFT(TRIM(PUT(JOB, $6.)));
 
******             ASSIGN OBSERVATION TO NODE             ******;
IF NOT MISSING(DEBTINC) AND ((DEBTINC >= 40.976364979488))
 THEN DO;
  IF NOT MISSING(DEBTINC) AND ((DEBTINC >= 43.84338265478))
   THEN DO;
    IF NOT MISSING(CLAGE) AND ((CLAGE >= 222.358612846148))
     THEN DO;
      IF NOT MISSING(DEBTINC) AND ((DEBTINC >= 46.710400330072))
       THEN DO;
        _Node_ = 28;
        _Leaf_ = 7;
        P_BAD0 = 0;
        P_BAD1 = 1;
        V_BAD0 = 0;
        V_BAD1 = 1;
      END;
      ELSE DO;
        _Node_ = 27;
        _Leaf_ = 6;
        P_BAD0 = 0.81818182;
        P_BAD1 = 0.18181818;
        V_BAD0 = 1;
        V_BAD1 = 0;
      END;
  END;
  ELSE DO;
    _Node_ = 13;
    _Leaf_ = 0;
    P_BAD0 = 0;
    P_BAD1 = 1;
    V_BAD0 = 0.1;
    V_BAD1 = 0.9;
  END;
END;
ELSE DO;
  IF NOT MISSING(MORTDUE) AND ((MORTDUE < 60283.04))
   THEN DO;
    IF NOT MISSING(LOAN) AND ((LOAN < 19340))
     THEN DO;
      IF NOT MISSING(DELINQ) AND ((DELINQ >= 0.1))
       THEN DO;
        _Node_ = 38;
        _Leaf_ = 13;
        P_BAD0 = 0;
        P_BAD1 = 1;
        V_BAD0 = 0;
        V_BAD1 = 1;
      END;
      ELSE DO;
        _Node_ = 37;
        _Leaf_ = 12;
        P_BAD0 = 0.6;
        P_BAD1 = 0.4;
        V_BAD0 = 0.84615385;
        V_BAD1 = 0.15384615;
      END;
    END;
    ELSE DO;
      _Node_ = 24;
      _Leaf_ = 5;
      P_BAD0 = 0.92857143;
      P_BAD1 = 0.071428571;
      V_BAD0 = 0.83333333;
      V_BAD1 = 0.16666667;
    END;
  END;
  ELSE DO;
    IF NOT MISSING(LOAN) AND ((LOAN >= 38744))
     THEN DO;
      IF NOT MISSING(CLNO) AND ((CLNO >= 19.2))
       THEN DO;
        _Node_ = 42;
        _Leaf_ = 16;
        P_BAD0 = 0;
        P_BAD1 = 1;
        V_BAD0 = .;
        V_BAD1 = .;
      END;
      ELSE DO;
        _Node_ = 41;
        _Leaf_ = 15;
        P_BAD0 = 0.91666667;
        P_BAD1 = 0.083333333;
        V_BAD0 = 1;
        V_BAD1 = 0;
      END;
    END;
    ELSE DO;
      IF NOT MISSING(DEROG) AND ((DEROG >= 2.1))
       THEN DO;
        _Node_ = 40;
        _Leaf_ = 14;
        P_BAD0 = 0;
        P_BAD1 = 1;
        V_BAD0 = .;
        V_BAD1 = .;
      END;
      ELSE DO;
        IF NOT MISSING(CLAGE) AND ((CLAGE < 140.616333384704))
         THEN DO;
          IF NOT MISSING(JOB) AND (_RT_5_6 IN ('Mgr','ProfEx','Sales') )
           THEN DO;
            _Node_ = 58;
            _Leaf_ = 27;
            P_BAD0 = 0.46153846;
            P_BAD1 = 0.53846154;
            V_BAD0 = 0;
            V_BAD1 = 1;
          END;
          ELSE DO;
            _Node_ = 57;
            _Leaf_ = 26;
            P_BAD0 = 1;
            P_BAD1 = 0;
            V_BAD0 = 0.94736842;
            V_BAD1 = 0.052631579;
          END;
        END;
        ELSE DO;
          _Node_ = 52;
          _Leaf_ = 23;
          P_BAD0 = 0.984375;
          P_BAD1 = 0.015625;
          V_BAD0 = 0.97916667;
          V_BAD1 = 0.020833333;
        END;
      END;
    END;
  END;
END;
END;
ELSE DO;
IF NOT MISSING(DEROG) AND ((DEROG >= 0.1))
 THEN DO;
  IF NOT MISSING(DEROG) AND ((DEROG >= 1.1))
   THEN DO;
    IF NOT MISSING(NINQ) AND ((NINQ >= 4.03))
     THEN DO;
      _Node_ = 22;
      _Leaf_ = 4;
      P_BAD0 = 0.14285714;
      P_BAD1 = 0.85714286;
      V_BAD0 = 0.5;
      V_BAD1 = 0.5;
    END;
    ELSE DO;
      IF NOT MISSING(MORTDUE) AND ((MORTDUE < 64226.4))
       THEN DO;
        IF NOT MISSING(CLAGE) AND ((CLAGE >= 234.03608134064))
         THEN DO;
          _Node_ = 50;
          _Leaf_ = 22;
          P_BAD0 = 0.85714286;
          P_BAD1 = 0.14285714;
          V_BAD0 = 1;
          V_BAD1 = 0;
        END;
        ELSE DO;
          _Node_ = 49;
          _Leaf_ = 21;
          P_BAD0 = 0.28571429;
          P_BAD1 = 0.71428571;
          V_BAD0 = 0.4;
          V_BAD1 = 0.6;
        END;
      END;
      ELSE DO;
        _Node_ = 36;
        _Leaf_ = 11;
        P_BAD0 = 0.84848485;
        P_BAD1 = 0.15151515;
        V_BAD0 = 0.92857143;
        V_BAD1 = 0.071428571;
      END;
    END;
  END;
  ELSE DO;
    IF NOT MISSING(JOB) AND (_RT_5_6 IN ('Office') )
     THEN DO;
      IF NOT MISSING(DEBTINC) AND ((DEBTINC < 36.67583846655))
       THEN DO;
        _Node_ = 33;
        _Leaf_ = 9;
        P_BAD0 = 0.16666667;
        P_BAD1 = 0.83333333;
        V_BAD0 = .;
        V_BAD1 = .;
      END;
      ELSE DO;
        _Node_ = 34;
        _Leaf_ = 10;
        P_BAD0 = 0.875;
        P_BAD1 = 0.125;
        V_BAD0 = 0.6;
        V_BAD1 = 0.4;
      END;
    END;
    ELSE DO;
      _Node_ = 19;
      _Leaf_ = 3;
      P_BAD0 = 0.9245283;
      P_BAD1 = 0.075471698;
      V_BAD0 = 0.90384615;
      V_BAD1 = 0.096153846;
    END;
  END;
END;
ELSE DO;
  IF NOT MISSING(DELINQ) AND ((DELINQ >= 0.1))
   THEN DO;
    IF NOT MISSING(LOAN) AND ((LOAN < 6110))
     THEN DO;
      _Node_ = 17;
      _Leaf_ = 2;
      P_BAD0 = 0.5;
      P_BAD1 = 0.5;
      V_BAD0 = 1;
      V_BAD1 = 0;
    END;
    ELSE DO;
      IF NOT MISSING(NINQ) AND ((NINQ >= 2.08))
       THEN DO;
        _Node_ = 32;
        _Leaf_ = 8;
        P_BAD0 = 0.68421053;
        P_BAD1 = 0.31578947;
        V_BAD0 = 0.875;
        V_BAD1 = 0.125;
      END;
      ELSE DO;
        IF NOT MISSING(DEBTINC) AND ((DEBTINC < 22.34075009009))
         THEN DO;
          _Node_ = 47;
          _Leaf_ = 20;
          P_BAD0 = 0.73333333;
          P_BAD1 = 0.26666667;
          V_BAD0 = 0.72727273;
          V_BAD1 = 0.27272727;
        END;
        ELSE DO;
          IF NOT MISSING(DELINQ) AND ((DELINQ >= 1.1))
           THEN DO;
            IF NOT MISSING(MORTDUE) AND ((MORTDUE >= 64226.4))
             THEN DO;
              IF NOT MISSING(MORTDUE) AND ((MORTDUE < 79999.84))
               THEN DO;
                _Node_ = 65;
                _Leaf_ = 32;
                P_BAD0 = 0;
                P_BAD1 = 1;
                V_BAD0 = 0.25;
                V_BAD1 = 0.75;
              END;
              ELSE DO;
                _Node_ = 66;
                _Leaf_ = 33;
                P_BAD0 = 1;
                P_BAD1 = 0;
                V_BAD0 = 0.57142857;
                V_BAD1 = 0.42857143;
              END;
            END;
            ELSE DO;
              _Node_ = 61;
              _Leaf_ = 29;
              P_BAD0 = 0.94444444;
              P_BAD1 = 0.055555556;
              V_BAD0 = 0.83333333;
              V_BAD1 = 0.16666667;
            END;
          END;
          ELSE DO;
            _Node_ = 55;
            _Leaf_ = 25;
            P_BAD0 = 0.95804196;
            P_BAD1 = 0.041958042;
            V_BAD0 = 0.96774194;
            V_BAD1 = 0.032258065;
          END;
        END;
      END;
    END;
  END;
  ELSE DO;
    IF NOT MISSING(CLAGE) AND ((CLAGE < 175.64873886818))
     THEN DO;
      IF NOT MISSING(LOAN) AND ((LOAN < 9638))
       THEN DO;
        IF NOT MISSING(MORTDUE) AND ((MORTDUE < 36622.88))
         THEN DO;
          _Node_ = 43;
          _Leaf_ = 17;
          P_BAD0 = 0.22222222;
          P_BAD1 = 0.77777778;
          V_BAD0 = 0.45454545;
          V_BAD1 = 0.54545455;
        END;
        ELSE DO;
          _Node_ = 44;
          _Leaf_ = 18;
          P_BAD0 = 0.89795918;
          P_BAD1 = 0.10204082;
          V_BAD0 = 0.91489362;
          V_BAD1 = 0.085106383;
        END;
      END;
      ELSE DO;
        IF NOT MISSING(VALUE) AND ((VALUE < 85039.78))
         THEN DO;
          IF NOT MISSING(CLAGE) AND ((CLAGE >= 128.938864890212))
           THEN DO;
            IF NOT MISSING(YOJ) AND ((YOJ >= 9.02))
             THEN DO;
              IF NOT MISSING(YOJ) AND ((YOJ >= 14.35))
               THEN DO;
                _Node_ = 64;
                _Leaf_ = 31;
                P_BAD0 = 1;
                P_BAD1 = 0;
                V_BAD0 = 0.6;
                V_BAD1 = 0.4;
              END;
              ELSE DO;
                _Node_ = 63;
                _Leaf_ = 30;
                P_BAD0 = 0;
                P_BAD1 = 1;
                V_BAD0 = 1;
                V_BAD1 = 0;
              END;
            END;
            ELSE DO;
              _Node_ = 59;
              _Leaf_ = 28;
              P_BAD0 = 0.94117647;
              P_BAD1 = 0.058823529;
              V_BAD0 = 0.95652174;
              V_BAD1 = 0.043478261;
            END;
          END;
          ELSE DO;
            _Node_ = 53;
            _Leaf_ = 24;
            P_BAD0 = 0.9516129;
            P_BAD1 = 0.048387097;
            V_BAD0 = 0.90123457;
            V_BAD1 = 0.098765432;
          END;
        END;
        ELSE DO;
          _Node_ = 46;
          _Leaf_ = 19;
          P_BAD0 = 0.97685185;
          P_BAD1 = 0.023148148;
          V_BAD0 = 0.97849462;
          V_BAD1 = 0.021505376;
        END;
      END;
    END;
    ELSE DO;
      _Node_ = 16;
      _Leaf_ = 1;
      P_BAD0 = 0.98207885;
      P_BAD1 = 0.017921147;
      V_BAD0 = 0.98742138;
      V_BAD1 = 0.012578616;
    END;
  END;
END;
END;
****************************************************************;
******     END OF HP TREE (PROC HPSPLIT) SCORING CODE    ******;
****************************************************************;
